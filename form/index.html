<html>
	<head>
		<title>Trent Parkinson - Contact Me</title>
		<!-- link to main stylesheet -->
		<link rel="stylesheet" type="text/css" href="/css/main.css">

	</head>
	<body>
	
        <nav>
    		<ul>
        		<li><a href="/">Home</a></li>
	        	<li><a href="/resume">Resume</a></li>
        		<li><a href="/projects">Projects</a></li>
        		<li><a href="/form/">Contact Me</a></li>
    		</ul>
		</nav>
		<br>
		<br>
		
		<h2 class="content-head is-center">Contact Me!</h2>
		  <aside>
			 <p>
			   I would <em>love</em> to hear from you! </p>
			   <p>Please use the <b><em>Contact Form</em></b>
			   to send me a message.
			 </p>
		  </aside>

  <div class="form-container">
    <form name="submit-to-google-sheet">
      <input name="Name" type="text" placeholder="Name" required>
      <input name="Email" type="email" placeholder="Email" required>
	    <textarea id="Message" name="Message" rows=8 placeholder="What can I help you with..." required></textarea>
      <button type="submit">Send</button>
    </form>

    <div class="loading js-loading is-hidden">
      <div class="loading-spinner">
        <svg><circle cx="25" cy="25" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"/></svg>
      </div>
    </div>

    <p class="js-success-message is-hidden"><em>Thanks</em> for contacting me!
      I will get back to you soon!</p>
    <p class="js-error-message is-hidden">Error!</p>
  </div>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbxnQ-lf30GU_sHOvV_7lIbj6clmAptZJeJPQ_jdZQkcHVmYz3IO/exec'
    const form = document.forms['submit-to-google-sheet']
    const loading = document.querySelector('.js-loading')
    const successMessage = document.querySelector('.js-success-message')
    const errorMessage = document.querySelector('.js-error-message')

    form.addEventListener('submit', e => {
      e.preventDefault()
      showLoadingIndicator()
      fetch(scriptURL, { method: 'POST', body: new FormData(form)})
        .then(response => showSuccessMessage(response))
        .catch(error => showErrorMessage(error))
    })

    function showLoadingIndicator () {
      form.classList.add('is-hidden')
      loading.classList.remove('is-hidden')
    }

    function showSuccessMessage (response) {
      console.log('Success!', response)
      setTimeout(() => {
        successMessage.classList.remove('is-hidden')
        loading.classList.add('is-hidden')
      }, 500)
    }

    function showErrorMessage (error) {
      console.error('Error!', error.message)
      setTimeout(() => {
        errorMessage.classList.remove('is-hidden')
        loading.classList.add('is-hidden')
      }, 500)
    }
  </script>

    		</div><!-- /.blurb -->
		</div><!-- /.container -->
		<footer>
    		<ul>
        		<li><a href="https://www.linkedin.com/in/trent-parkinson-920836120">My LinkedIn</a></li>
        		<li><a href="https://github.com/parkinsontrent425">My Github</a></li>
			</ul>
		</footer>
	</body>
</html>